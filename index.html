<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MG BOT AI | Trading Assistant</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6C5CE7;
            --primary-dark: #5649C7;
            --secondary: #00D1A0;
            --accent: #FF5E7D;
            --dark: #0F0C29;
            --light: #F5F7FF;
            --success: #00D1A0;
            --warning: #FFA726;
            --danger: #FF4D6D;
            --glass: rgba(255,255,255,0.1);
            --poll: #4CAF50;
            --whatsapp: #25D366;
            --telegram: #0088cc;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }
        
        body {
            background: var(--dark);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: 80px;
        }
        
        /* Video Background */
        .video-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
            opacity: 0.15;
        }
        
        /* Main Container */
        .container {
            max-width: 450px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }
        
        /* Header Section */
        .header {
            text-align: center;
            margin-bottom: 20px;
            position: relative;
            padding-top: 50px;
        }
        
        .logo {
            width: 80px;
            height: 80px;
            margin: 0 auto 15px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: white;
            box-shadow: 0 5px 20px rgba(108, 92, 231, 0.5);
            border: 3px solid rgba(255,255,255,0.2);
        }
        
        .app-name {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        /* Profitable Traders Counter */
        .profitable-traders {
            background: linear-gradient(135deg, rgba(0,209,160,0.1), rgba(108, 92, 231, 0.1));
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            margin: 15px 0;
            border: 1px solid rgba(0,209,160,0.3);
            backdrop-filter: blur(5px);
        }
        
        .profitable-percentage {
            font-size: 24px;
            font-weight: 700;
            color: var(--success);
            margin-bottom: 5px;
        }
        
        .profitable-label {
            font-size: 12px;
            color: rgba(255,255,255,0.8);
            margin-bottom: 8px;
        }
        
        .stats-counter {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
        }
        
        .stat-counter-item {
            text-align: center;
        }
        
        .counter-value {
            font-size: 22px;
            font-weight: 700;
            color: var(--secondary);
        }
        
        .counter-label {
            font-size: 11px;
            color: rgba(255,255,255,0.6);
            margin-top: 2px;
        }
        
        /* Toggle Button */
        .toggle-management-btn {
            display: block;
            width: 100%;
            padding: 12px;
            background: rgba(108, 92, 231, 0.2);
            border: 1px solid var(--primary);
            border-radius: 10px;
            color: white;
            font-size: 14px;
            font-weight: 600;
            margin: 15px 0;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .toggle-management-btn:hover {
            background: rgba(108, 92, 231, 0.3);
            transform: translateY(-2px);
        }
        
        /* Hideable Sections */
        .hideable-section {
            transition: all 0.5s ease;
            overflow: hidden;
        }
        
        .hideable-section.hidden {
            max-height: 0;
            opacity: 0;
            margin: 0;
            padding: 0;
            border: none;
        }
        
        /* Section Styling */
        .section {
            background: rgba(26,29,40,0.8);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid var(--glass);
            backdrop-filter: blur(5px);
        }
        
        .section-title {
            font-size: 16px;
            margin-bottom: 12px;
            color: var(--secondary);
            font-weight: 600;
            display: flex;
            align-items: center;
        }
        
        .section-title i {
            margin-right: 10px;
            font-size: 18px;
        }
        
        /* Market Toggle */
        .market-toggle {
            display: flex;
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid var(--glass);
        }
        
        .market-btn {
            flex: 1;
            padding: 10px;
            text-align: center;
            background: rgba(0,0,0,0.3);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .market-btn.selected {
            background: var(--primary);
        }
        
        /* Enhanced Pair Selector - Swipe Style */
        .pair-selector-swipe {
            position: relative;
            width: 100%;
            height: 80px;
            overflow: hidden;
            border-radius: 12px;
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--glass);
        }
        
        .pair-swipe-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .pair-slide {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.5s ease, opacity 0.5s ease;
            opacity: 0;
            transform: translateX(100%);
        }
        
        .pair-slide.active {
            opacity: 1;
            transform: translateX(0);
        }
        
        .pair-slide.prev {
            opacity: 0.5;
            transform: translateX(-100%);
        }
        
        .pair-slide.next {
            opacity: 0.5;
            transform: translateX(100%);
        }
        
        .pair-display-swipe {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        
        .pair-flags {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .pair-flag {
            width: 30px;
            height: 22px;
            object-fit: cover;
            border-radius: 3px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }
        
        .pair-name {
            font-size: 24px;
            font-weight: 700;
            color: white;
        }
        
        .swipe-controls {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 15px;
            pointer-events: none;
        }
        
        .swipe-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(108, 92, 231, 0.3);
            border: 2px solid rgba(255,255,255,0.2);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            pointer-events: all;
            font-size: 18px;
        }
        
        .swipe-btn:hover {
            background: var(--primary);
            transform: scale(1.1);
        }
        
        .pair-indicators {
            position: absolute;
            bottom: 10px;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 8px;
        }
        
        .pair-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transition: all 0.3s;
        }
        
        .pair-indicator.active {
            background: var(--primary);
            transform: scale(1.2);
        }
        
        /* Time Frame Section */
        .time-options {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }
        
        .time-btn {
            padding: 8px 10px;
            border-radius: 8px;
            background: rgba(0,0,0,0.3);
            font-size: 13px;
            flex: 1;
            min-width: calc(20% - 8px);
            text-align: center;
            border: 1px solid var(--glass);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .time-btn.selected {
            background: var(--primary);
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 3px 10px rgba(108, 92, 231, 0.3);
        }
        
        /* Binary Options Risk Management */
        .risk-management-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        
        .risk-input-group {
            background: rgba(0,0,0,0.3);
            padding: 12px;
            border-radius: 8px;
            border: 1px solid var(--glass);
        }
        
        .risk-input-group label {
            display: block;
            font-size: 12px;
            color: var(--secondary);
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .risk-input {
            width: 100%;
            background: transparent;
            border: none;
            color: white;
            font-size: 16px;
            font-weight: 600;
            text-align: center;
            outline: none;
        }
        
        .risk-input::placeholder {
            color: rgba(255,255,255,0.3);
        }
        
        .risk-percentage {
            font-size: 11px;
            color: var(--warning);
            text-align: center;
            margin-top: 5px;
            opacity: 0.8;
        }
        
        .balance-display {
            background: rgba(0,209,160,0.1);
            border: 1px solid rgba(0,209,160,0.3);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            margin-top: 10px;
        }
        
        .balance-amount {
            font-size: 20px;
            font-weight: 700;
            color: var(--success);
            margin-bottom: 5px;
            cursor: pointer;
        }
        
        .balance-amount.editing {
            border-bottom: 2px dashed var(--secondary);
        }
        
        .balance-label {
            font-size: 11px;
            color: rgba(255,255,255,0.6);
        }
        
        .risk-level {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 600;
            margin-left: 5px;
        }
        
        .risk-level.low {
            background: rgba(0,209,160,0.2);
            color: var(--success);
        }
        
        .risk-level.medium {
            background: rgba(255,167,38,0.2);
            color: var(--warning);
        }
        
        .risk-level.high {
            background: rgba(255,77,109,0.2);
            color: var(--danger);
        }
        
        /* Payout Editable */
        .payout-editable {
            cursor: pointer;
            position: relative;
        }
        
        .payout-editable.editing {
            border-bottom: 2px dashed var(--secondary);
        }
        
        /* Binary Options Specific */
        .binary-options-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        
        .option-btn {
            padding: 10px;
            border-radius: 8px;
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--glass);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .option-btn.selected {
            background: var(--primary);
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .option-btn.win {
            background: rgba(0,209,160,0.2);
            border-color: var(--success);
        }
        
        .option-btn.loss {
            background: rgba(255,77,109,0.2);
            border-color: var(--danger);
        }
        
        .payout-display {
            font-size: 14px;
            font-weight: 600;
            text-align: center;
            margin: 10px 0;
        }
        
        .payout-amount {
            color: var(--success);
        }
        
        /* Buttons */
        .btn {
            display: block;
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            font-weight: 600;
            font-size: 15px;
            margin: 20px 0;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(108, 92, 231, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(108, 92, 231, 0.4);
        }

        /* Secondary Button */
        .btn-secondary {
            background: linear-gradient(135deg, var(--secondary), #00BFA5);
            box-shadow: 0 5px 15px rgba(0, 209, 160, 0.3);
        }
        
        .btn-secondary:hover {
            box-shadow: 0 8px 20px rgba(0, 209, 160, 0.4);
        }

        /* License Button */
        .btn-license {
            background: linear-gradient(135deg, var(--warning), #FF8A00);
            box-shadow: 0 5px 15px rgba(255, 167, 38, 0.3);
            margin: 10px 0;
        }
        
        .btn-license:hover {
            box-shadow: 0 8px 20px rgba(255, 167, 38, 0.4);
        }
        
        /* Contact Icons */
        .contact-icons {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 99;
        }
        
        .contact-icon {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .contact-icon:hover {
            transform: translateY(-3px) scale(1.1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.4);
        }
        
        .telegram-icon {
            background: linear-gradient(135deg, var(--telegram), #00A8E8);
        }
        
        .whatsapp-icon {
            background: linear-gradient(135deg, var(--whatsapp), #128C7E);
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }
        
        .modal-box {
            background: rgba(26,29,40,0.95);
            padding: 25px;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            border: 1px solid var(--glass);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            animation: modalIn 0.4s;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .compact-modal {
            max-width: 350px;
            padding: 20px;
        }
        
        /* Close modal button */
        .close-modal-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            color: white;
            font-size: 20px;
            cursor: pointer;
            opacity: 0.7;
            transition: all 0.3s;
            z-index: 2;
        }
        
        .close-modal-btn:hover {
            opacity: 1;
            color: var(--accent);
        }
        
        /* Signal Modal */
        .signal-direction {
            font-size: 42px;
            font-weight: 800;
            margin: 15px 0;
            text-transform: uppercase;
        }
        
        .signal-up {
            color: var(--success);
            animation: pulse 2s infinite;
        }
        
        .signal-down {
            color: var(--danger);
            animation: pulse 2s infinite;
        }
        
        .signal-details {
            font-size: 16px;
            margin: 20px 0;
        }
        
        .signal-details div {
            margin-bottom: 10px;
        }
        
        .signal-risk-info {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid var(--warning);
        }
        
        /* Loading Modal */
        .loading-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }
        
        .loading-content {
            text-align: center;
            padding: 30px;
        }
        
        .loading-spinner {
            width: 80px;
            height: 80px;
            border: 5px solid rgba(108, 92, 231, 0.3);
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        .loading-text {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--secondary);
        }
        
        .loading-timer {
            font-size: 24px;
            font-weight: 700;
            color: white;
            margin: 15px 0;
        }
        
        .trade-result-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        
        .trade-result-btn {
            padding: 12px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .trade-win-btn {
            background: linear-gradient(135deg, var(--success), #00BFA5);
            color: white;
        }
        
        .trade-loss-btn {
            background: linear-gradient(135deg, var(--danger), #FF3E6C);
            color: white;
        }
        
        .trade-result-btn:hover {
            transform: translateY(-2px);
        }
        
        /* License Modal - Simplified */
        .license-input-container {
            position: relative;
            width: 100%;
        }
        
        .license-input {
            width: 100%;
            padding: 14px;
            margin: 15px 0;
            border-radius: 10px;
            border: 1px solid var(--glass);
            background: rgba(0,0,0,0.3);
            color: white;
            font-size: 15px;
            text-align: center;
            letter-spacing: 1px;
        }
        
        .clear-license {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--light);
            cursor: pointer;
            opacity: 0.7;
            transition: all 0.3s;
            z-index: 2;
        }
        
        .clear-license:hover {
            opacity: 1;
            color: var(--accent);
        }
        
        .license-contact-info {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            text-align: center;
        }
        
        .license-contact-title {
            font-size: 14px;
            color: var(--secondary);
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .license-contact-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }
        
        .license-contact-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: white;
            transition: all 0.3s;
        }
        
        .license-contact-btn:hover {
            transform: translateY(-3px);
        }
        
        .license-contact-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 8px;
        }
        
        .license-contact-label {
            font-size: 12px;
            opacity: 0.8;
        }
        
        /* Tutorial Link */
        .tutorial-link {
            display: block;
            text-align: center;
            margin-top: 15px;
            color: var(--secondary);
            font-size: 14px;
            text-decoration: none;
        }
        
        /* Custom Alert */
        .custom-alert {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 50, 50, 0.9);
            color: white;
            padding: 20px;
            border-radius: 10px;
            z-index: 1000;
            text-align: center;
            max-width: 80%;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            animation: shake 0.5s;
            display: none;
        }
        
        /* Trade History Section */
        .trade-history {
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .trade-history-title {
            font-size: 14px;
            color: var(--secondary);
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .trade-history-item {
            background: rgba(255,255,255,0.05);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid var(--primary);
        }
        
        .trade-history-item.win {
            border-left-color: var(--success);
        }
        
        .trade-history-item.loss {
            border-left-color: var(--danger);
        }
        
        .trade-pair {
            font-weight: 600;
            font-size: 13px;
        }
        
        .trade-result {
            font-weight: 700;
            font-size: 13px;
        }
        
        .trade-result.win {
            color: var(--success);
        }
        
        .trade-result.loss {
            color: var(--danger);
        }
        
        .trade-time {
            font-size: 11px;
            color: rgba(255,255,255,0.6);
        }
        
        .clear-history-btn {
            background: rgba(255,255,255,0.1);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .clear-history-btn:hover {
            background: rgba(255,255,255,0.2);
        }
        
        /* Statistics Section */
        .stats-section {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .stat-box {
            background: rgba(0,0,0,0.3);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid var(--glass);
        }
        
        .stat-value {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .stat-value.win {
            color: var(--success);
        }
        
        .stat-value.loss {
            color: var(--danger);
        }
        
        .stat-label {
            font-size: 11px;
            color: rgba(255,255,255,0.6);
        }
        
        /* Risk Warning Section */
        .risk-warning {
            background: rgba(255, 77, 109, 0.1);
            border: 1px solid rgba(255, 77, 109, 0.3);
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 12px;
            color: var(--light);
        }
        
        .risk-warning i {
            color: var(--danger);
            margin-right: 8px;
        }
        
        /* Animations */
        @keyframes pulse {
            0% { opacity: 0.8; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
            100% { opacity: 0.8; transform: scale(1); }
        }
        
        @keyframes pulseGlow {
            0% { text-shadow: 0 0 5px rgba(0, 209, 160, 0.5); }
            50% { text-shadow: 0 0 15px rgba(0, 209, 160, 0.8); }
            100% { text-shadow: 0 0 5px rgba(0, 209, 160, 0.5); }
        }
        
        @keyframes pulseWarning {
            0% { border-color: var(--danger); box-shadow: 0 0 5px rgba(255, 77, 109, 0.5); }
            50% { border-color: #ff2e2e; box-shadow: 0 0 15px rgba(255, 77, 109, 0.8); }
            100% { border-color: var(--danger); box-shadow: 0 0 5px rgba(255, 77, 109, 0.5); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes modalIn {
            from { opacity: 0; transform: translateY(-20px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translate(-50%, -50%) rotate(0deg); }
            20%, 60% { transform: translate(-50%, -50%) rotate(-2deg); }
            40%, 80% { transform: translate(-50%, -50%) rotate(2deg); }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOutLeft {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(-100%); opacity: 0; }
        }
        
        @keyframes slideInLeft {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOutRight {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
        
        @keyframes countUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Risk Pop-up Modal (NEW) */
        .risk-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 4000;
            display: none;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }
        
        .risk-popup-content {
            background: rgba(26,29,40,0.95);
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 450px;
            text-align: center;
            border: 3px solid var(--danger);
            box-shadow: 0 10px 30px rgba(0,0,0,0.7);
            animation: modalIn 0.5s;
        }
        
        .risk-popup h3 {
            color: var(--danger);
            font-size: 24px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .risk-popup p {
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .risk-popup-warning {
            background: rgba(255, 77, 109, 0.2);
            border: 2px solid var(--danger);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-weight: bold;
            animation: pulseWarning 2s infinite;
        }
        
        .risk-popup-checkbox {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        
        .risk-popup-checkbox input {
            width: 18px;
            height: 18px;
        }
        
        .risk-popup-checkbox label {
            font-size: 14px;
            color: var(--light);
        }
    </style>
</head>
<body>
    <!-- Video Background -->
    <video class="video-bg" src="https://qxbroker.com/site/img/main_bg.mp4" autoplay muted loop></video>
    
    <!-- Main Container -->
    <div class="container">
        <div class="header">
            <div class="logo">
                <i class="fas fa-robot"></i>
            </div>
            <div class="app-name">MG BOT AI</div>
            
            <!-- Profitable Traders Counter -->
            <div class="profitable-traders">
                <div class="profitable-percentage" id="profitable-percentage">96.4%</div>
                <div class="profitable-label">traders using this tool are profitable</div>
                <div class="stats-counter">
                    <div class="stat-counter-item">
                        <div class="counter-value" id="total-signals">0</div>
                        <div class="counter-label">Total Signals</div>
                    </div>
                    <div class="stat-counter-item">
                        <div class="counter-value" id="profitable-trades">0</div>
                        <div class="counter-label">Profitable Trades</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Market Type Section -->
        <div class="section">
            <div class="section-title">
                <i class="fas fa-chart-line"></i> Market Type
            </div>
            <div class="market-toggle">
                <div class="market-btn selected" id="live-market">LIVE</div>
                <div class="market-btn" id="otc-market">OTC</div>
            </div>
        </div>
        
        <!-- Enhanced Currency Pair Section with Swipe -->
        <div class="section">
            <div class="section-title">
                <i class="fas fa-money-bill-wave"></i> Currency Pair
            </div>
            <div class="pair-selector-swipe">
                <div class="pair-swipe-container" id="pair-swipe-container">
                    <!-- Pairs will be dynamically added here -->
                </div>
                <div class="swipe-controls">
                    <button class="swipe-btn" id="prev-pair">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="swipe-btn" id="next-pair">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                <div class="pair-indicators" id="pair-indicators">
                    <!-- Indicators will be dynamically added here -->
                </div>
            </div>
        </div>
        
        <!-- Time Frame Section -->
        <div class="section">
            <div class="section-title">
                <i class="fas fa-clock"></i> Time Frame
            </div>
            <div class="time-options">
                <div class="time-btn selected" data-time="5">5s</div>
                <div class="time-btn" data-time="10">10s</div>
                <div class="time-btn" data-time="15">15s</div>
                <div class="time-btn" data-time="30">30s</div>
                <div class="time-btn" data-time="60">1m</div>
                <div class="time-btn" data-time="300">5m</div>
                <div class="time-btn" data-time="600">10m</div>
                <div class="time-btn" data-time="900">15m</div>
                <div class="time-btn" data-time="1800">30m</div>
            </div>
        </div>
        
        <!-- Toggle Button for Risk Management -->
        <button class="toggle-management-btn" id="toggle-management">
            <i class="fas fa-cog"></i> Show/Hide Risk Management & History
        </button>
        
        <!-- Binary Options Risk Management Section (Hideable) -->
        <div class="section hideable-section" id="risk-management-section">
            <div class="section-title">
                <i class="fas fa-shield-alt"></i> Risk Management
            </div>
            
            <!-- Editable Balance Display -->
            <div class="balance-display">
                <div class="balance-amount" id="balance-amount">$1,000.00</div>
                <div class="balance-label">Click to edit Trading Balance</div>
            </div>
            
            <!-- Risk Management Grid -->
            <div class="risk-management-grid">
                <div class="risk-input-group">
                    <label>Trade Amount ($)</label>
                    <input type="number" class="risk-input" id="trade-amount" value="10" min="1" max="1000" step="1">
                    <div class="risk-percentage" id="trade-amount-percentage">1.0% of balance</div>
                </div>
                
                <div class="risk-input-group">
                    <label>Payout (%)</label>
                    <div class="payout-editable" id="payout-percentage">85%</div>
                    <div class="risk-percentage" id="payout-amount">Win: $8.50</div>
                </div>
                
                <div class="risk-input-group">
                    <label>Daily Stop Loss ($)</label>
                    <input type="number" class="risk-input" id="daily-stop-loss" value="50" min="10" max="500" step="10">
                    <div class="risk-percentage" id="daily-sl-percentage">5.0% of balance</div>
                </div>
                
                <div class="risk-input-group">
                    <label>Daily Target ($)</label>
                    <input type="number" class="risk-input" id="daily-target" value="100" min="20" max="1000" step="20">
                    <div class="risk-percentage" id="daily-target-percentage">10.0% of balance</div>
                </div>
            </div>
            
            <!-- Binary Options Payout Display -->
            <div class="payout-display">
                <strong>Trade Risk:</strong> 
                <span style="color: var(--danger);">-$<span id="risk-amount">10.00</span></span> | 
                <strong>Potential Win:</strong> 
                <span style="color: var(--success);">+$<span id="win-amount">8.50</span></span>
            </div>
            
            <!-- Risk Level Control -->
            <div class="binary-options-grid">
                <div class="option-btn selected" data-risk="low">
                    <i class="fas fa-shield-alt"></i><br>
                    LOW RISK
                </div>
                <div class="option-btn" data-risk="medium">
                    <i class="fas fa-chart-line"></i><br>
                    MEDIUM RISK
                </div>
                <div class="option-btn" data-risk="high">
                    <i class="fas fa-bolt"></i><br>
                    HIGH RISK
                </div>
            </div>
            
            <!-- Statistics Section -->
            <div class="stats-section">
                <div class="stat-box">
                    <div class="stat-value win" id="win-count">0</div>
                    <div class="stat-label">Wins Today</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value loss" id="loss-count">0</div>
                    <div class="stat-label">Losses Today</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="win-rate">0%</div>
                    <div class="stat-label">Win Rate</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="daily-pnl">$0.00</div>
                    <div class="stat-label">Today's P&L</div>
                </div>
            </div>
            
            <!-- Risk Warning -->
            <div class="risk-warning">
                <i class="fas fa-exclamation-triangle"></i>
                <strong>HIGH RISK WARNING:</strong> Trading involves substantial risk of loss. Only use risk capital. Maximum 2% risk per trade recommended.
            </div>
        </div>
        
        <!-- Generate Signal Button -->
        <button class="btn" id="generate-btn">
            <i class="fas fa-bolt"></i> GENERATE TRADING SIGNAL
        </button>
        
        <!-- Tutorial Link -->
        <a href="https://youtube.com/shorts/uQ7c4qTOgJE?si=XyPH6hUtgvFhmOnu" class="tutorial-link" target="_blank">
            <i class="fas fa-play-circle"></i> How to use tutorial
        </a>
        
        <!-- Trade History (Hideable) -->
        <div class="section hideable-section" id="trade-history-section">
            <div class="trade-history-title">
                <span>Today's Trades</span>
                <button class="clear-history-btn" id="clear-history-btn">Clear History</button>
            </div>
            <div class="trade-history" id="trade-history">
                <!-- Trade history items will be added here -->
            </div>
        </div>
    </div>
    
    <!-- Contact Icons -->
    <div class="contact-icons">
        <a href="#" target="_blank" class="contact-icon telegram-icon" title="Telegram Support" id="telegram-license-btn">
            <i class="fab fa-telegram"></i>
        </a>
        <a href="#" target="_blank" class="contact-icon whatsapp-icon" title="WhatsApp Support" id="whatsapp-license-btn">
            <i class="fab fa-whatsapp"></i>
        </a>
    </div>
    
    <!-- Loading Modal -->
    <div class="modal loading-modal" id="loading-modal">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Analyzing Market Data...</div>
            <div class="loading-timer" id="loading-timer">3</div>
            <div>Please wait while we generate your signal</div>
        </div>
    </div>
    
    <!-- Signal Modal -->
    <div class="modal" id="signal-modal">
        <div class="modal-box">
            <div class="signal-direction signal-up" id="signal-direction">UP</div>
            <div class="signal-details">
                <div><strong>Pair:</strong> <span id="result-pair">EUR/USD</span></div>
                <div><strong>Time Frame:</strong> <span id="result-time">1m</span></div>
                <div><strong>Confidence:</strong> <span id="ai-confidence">92%</span></div>
                <div><strong>Signal Type:</strong> <span id="signal-type">CALL</span></div>
            </div>
            
            <!-- Risk Information -->
            <div class="signal-risk-info">
                <div><strong>Trade Amount:</strong> $<span id="modal-trade-amount">10.00</span></div>
                <div><strong>Potential Payout:</strong> <span id="modal-payout-percentage">85%</span> (+$<span id="modal-win-amount">8.50</span>)</div>
                <div><strong>Risk Amount:</strong> -$<span id="modal-risk-amount">10.00</span></div>
                <div><strong>Risk Level:</strong> <span class="risk-level low" id="modal-risk-level">LOW</span></div>
            </div>
            
            <!-- Trade Result Buttons -->
            <div class="trade-result-buttons">
                <button class="trade-result-btn trade-win-btn" id="trade-win-btn">
                    <i class="fas fa-check-circle"></i> TRADE WON
                </button>
                <button class="trade-result-btn trade-loss-btn" id="trade-loss-btn">
                    <i class="fas fa-times-circle"></i> TRADE LOST
                </button>
            </div>
            
            <button class="btn" id="close-signal" style="margin-top: 15px;">
                <i class="fas fa-times"></i> CLOSE
            </button>
        </div>
    </div>
    
    <!-- License Modal - Simplified Version -->
    <div class="modal" id="license-modal">
        <div class="modal-box compact-modal">
            <span class="close-modal-btn" id="close-license-modal">&times;</span>
            <h3>ENTER LICENSE KEY</h3>
            <p>To access premium trading signals</p>
            
            <div class="license-input-container">
                <input type="password" class="license-input" id="license-input" placeholder="XXXX-XXXX-XXXX-XXXX">
                <i class="fas fa-times clear-license" id="clear-license"></i>
            </div>
            
            <button class="btn" id="submit-license">SUBMIT LICENSE KEY</button>
            
            <!-- New Get License Key Button -->
            <button class="btn btn-license" id="get-license-btn">
                <i class="fas fa-key"></i> GET LICENSE KEY
            </button>
            
            <div class="license-contact-info">
                <div class="license-contact-title">
                    Need help? Contact us:
                </div>
                <div class="license-contact-buttons">
                    <a href="#" target="_blank" class="license-contact-btn" id="modal-telegram-btn">
                        <div class="license-contact-icon telegram-icon">
                            <i class="fab fa-telegram"></i>
                        </div>
                        <div class="license-contact-label">Telegram</div>
                    </a>
                    <a href="#" target="_blank" class="license-contact-btn" id="modal-whatsapp-btn">
                        <div class="license-contact-icon whatsapp-icon">
                            <i class="fab fa-whatsapp"></i>
                        </div>
                        <div class="license-contact-label">WhatsApp</div>
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Risk Warning Pop-up Modal -->
    <div class="risk-popup" id="risk-popup">
        <div class="risk-popup-content">
            <h3><i class="fas fa-exclamation-triangle"></i> ⚠️ HIGH RISK WARNING ⚠️</h3>
            <div class="risk-popup-warning">
                Trading involves substantial risk of loss. Only trade with risk capital you can afford to lose. Past performance does not guarantee future results.
            </div>
            <p><strong>⚠️ IMPORTANT WARNINGS:</strong></p>
            <p>1. You may lose ALL your invested capital</p>
            <p>2. Trading involves HIGH risk of financial loss</p>
            <p>3. Past performance does NOT guarantee future results</p>
            <p>4. Only use money you can afford to COMPLETELY LOSE</p>
            <p>5. Consider consulting with a financial advisor before trading</p>
            
            <div class="risk-popup-checkbox">
                <input type="checkbox" id="acknowledge-risk" required>
                <label for="acknowledge-risk">I understand the risks and accept full responsibility for any losses</label>
            </div>
            
            <button class="btn" id="acknowledge-risk-btn" style="background: var(--danger);">
                <i class="fas fa-check-circle"></i> ACKNOWLEDGE RISKS & CONTINUE
            </button>
        </div>
    </div>
    
    <!-- Custom Alert -->
    <div class="custom-alert" id="custom-alert">
        <h3>WRONG LICENSE KEY</h3>
        <p>Please enter a valid license key or contact us</p>
        <button class="btn" id="close-alert" style="margin-top: 15px; background: var(--danger);">
            <i class="fas fa-times"></i> CLOSE
        </button>
    </div>
    
    <script>
        // License key protection
        const correctLicense = "MGPRO-BOT-2026-G596G-KEY-96HYIF";
        const brokerUrl = "https://broker-qx.pro/sign-up/?lid=1676123";
        let isLicenseValid = false;
        let isRiskAcknowledged = false;
        let isOtcSelected = false;
        let isManagementVisible = false;
        let redirectInProgress = false;
        
        // Trading State
        let tradingState = {
            balance: 1000.00,
            tradeAmount: 10,
            payoutPercentage: 85,
            dailyStopLoss: 50,
            dailyTarget: 100,
            riskLevel: "low",
            winCount: 0,
            lossCount: 0,
            dailyPnl: 0.00,
            tradesToday: [],
            maxDailyTrades: 30,
            consecutiveLosses: 0,
            maxConsecutiveLosses: 3
        };
        
        // Stats for counter animation
        let statsData = {
            totalSignals: 2864,
            profitableTrades: 2761
        };
        
        // Currency pairs data for swipe selector
        const currencyPairs = [
            { code: "EUR/USD", flag1: "eu", flag2: "us" },
            { code: "GBP/USD", flag1: "gb", flag2: "us" },
            { code: "USD/JPY", flag1: "us", flag2: "jp" },
            { code: "USD/CHF", flag1: "us", flag2: "ch" },
            { code: "AUD/USD", flag1: "au", flag2: "us" },
            { code: "USD/CAD", flag1: "us", flag2: "ca" },
            { code: "EUR/GBP", flag1: "eu", flag2: "gb" },
            { code: "EUR/JPY", flag1: "eu", flag2: "jp" },
            { code: "GBP/JPY", flag1: "gb", flag2: "jp" },
            { code: "USD/TRY", flag1: "us", flag2: "tr" }
        ];
        
        let currentPairIndex = 0;
        let isEditingBalance = false;
        let isEditingPayout = false;
        
        // DOM elements
        const licenseModal = document.getElementById('license-modal');
        const licenseInput = document.getElementById('license-input');
        const clearLicense = document.getElementById('clear-license');
        const submitLicense = document.getElementById('submit-license');
        const getLicenseBtn = document.getElementById('get-license-btn');
        const closeLicenseModal = document.getElementById('close-license-modal');
        const riskPopup = document.getElementById('risk-popup');
        const acknowledgeRiskBtn = document.getElementById('acknowledge-risk-btn');
        const acknowledgeRiskCheckbox = document.getElementById('acknowledge-risk');
        const generateBtn = document.getElementById('generate-btn');
        const signalModal = document.getElementById('signal-modal');
        const loadingModal = document.getElementById('loading-modal');
        const loadingTimer = document.getElementById('loading-timer');
        const closeSignal = document.getElementById('close-signal');
        const customAlert = document.getElementById('custom-alert');
        const closeAlert = document.getElementById('close-alert');
        const liveMarket = document.getElementById('live-market');
        const otcMarket = document.getElementById('otc-market');
        const prevPairBtn = document.getElementById('prev-pair');
        const nextPairBtn = document.getElementById('next-pair');
        const pairSwipeContainer = document.getElementById('pair-swipe-container');
        const pairIndicators = document.getElementById('pair-indicators');
        const toggleManagementBtn = document.getElementById('toggle-management');
        const riskManagementSection = document.getElementById('risk-management-section');
        const tradeHistorySection = document.getElementById('trade-history-section');
        
        // Stats counter elements
        const totalSignalsElement = document.getElementById('total-signals');
        const profitableTradesElement = document.getElementById('profitable-trades');
        const profitablePercentageElement = document.getElementById('profitable-percentage');
        
        // Risk Management elements
        const tradeAmountInput = document.getElementById('trade-amount');
        const dailyStopLossInput = document.getElementById('daily-stop-loss');
        const dailyTargetInput = document.getElementById('daily-target');
        const payoutPercentageElement = document.getElementById('payout-percentage');
        const riskAmountElement = document.getElementById('risk-amount');
        const winAmountElement = document.getElementById('win-amount');
        const tradeAmountPercentage = document.getElementById('trade-amount-percentage');
        const dailySLPercentage = document.getElementById('daily-sl-percentage');
        const dailyTargetPercentage = document.getElementById('daily-target-percentage');
        const payoutAmount = document.getElementById('payout-amount');
        const balanceAmount = document.getElementById('balance-amount');
        
        // Statistics elements
        const winCountElement = document.getElementById('win-count');
        const lossCountElement = document.getElementById('loss-count');
        const winRateElement = document.getElementById('win-rate');
        const dailyPnlElement = document.getElementById('daily-pnl');
        
        // Trade history elements
        const tradeHistoryElement = document.getElementById('trade-history');
        const clearHistoryBtn = document.getElementById('clear-history-btn');
        
        // Signal modal elements
        const tradeWinBtn = document.getElementById('trade-win-btn');
        const tradeLossBtn = document.getElementById('trade-loss-btn');
        
        // Risk level buttons
        const riskLevelBtns = document.querySelectorAll('.option-btn[data-risk]');
        
        // Contact buttons
        const telegramLicenseBtn = document.getElementById('telegram-license-btn');
        const whatsappLicenseBtn = document.getElementById('whatsapp-license-btn');
        const modalTelegramBtn = document.getElementById('modal-telegram-btn');
        const modalWhatsappBtn = document.getElementById('modal-whatsapp-btn');
        
        // Initialize the app
        function initApp() {
            loadTradingState();
            setupEventListeners();
            initializeSwipeSelector();
            updateUI();
            updateStatistics();
            updateTradeHistory();
            calculatePayout();
            startCounterAnimation();
            
            // Hide management sections by default
            hideManagementSections();
            
            // Check if license is already validated
            const savedLicense = localStorage.getItem('mgBotLicenseValid');
            if (savedLicense === 'true') {
                isLicenseValid = true;
            }
        }
        
        // Smart redirect function that prevents browser blocking
        function smartRedirect(targetUrl, delay = 100) {
            if (redirectInProgress) return;
            
            redirectInProgress = true;
            
            try {
                // Method 1: Try opening in new tab with user interaction
                const newWindow = window.open(targetUrl, '_blank');
                
                if (newWindow) {
                    // If popup opens successfully
                    newWindow.focus();
                    
                    // Method 2: Also set a timeout for iframe fallback
                    setTimeout(() => {
                        // Create hidden iframe as fallback
                        const iframe = document.createElement('iframe');
                        iframe.style.display = 'none';
                        iframe.src = targetUrl;
                        document.body.appendChild(iframe);
                        
                        // Remove iframe after 5 seconds
                        setTimeout(() => {
                            if (iframe.parentNode) {
                                iframe.parentNode.removeChild(iframe);
                            }
                            redirectInProgress = false;
                        }, 5000);
                    }, delay);
                } else {
                    // If popup blocked, try iframe method
                    setTimeout(() => {
                        const iframe = document.createElement('iframe');
                        iframe.style.display = 'none';
                        iframe.src = targetUrl;
                        document.body.appendChild(iframe);
                        
                        // Also try window.location after a delay (as fallback)
                        setTimeout(() => {
                            try {
                                window.location.href = targetUrl;
                            } catch (e) {
                                console.log('Redirection methods failed');
                            }
                            
                            // Clean up
                            setTimeout(() => {
                                if (iframe.parentNode) {
                                    iframe.parentNode.removeChild(iframe);
                                }
                                redirectInProgress = false;
                            }, 5000);
                        }, 1000);
                    }, delay);
                }
            } catch (error) {
                console.error('Redirect error:', error);
                redirectInProgress = false;
            }
        }
        
        // Handle contact button clicks with smart redirect
        function handleContactClick(contactUrl) {
            // Open contact app in new tab
            window.open(contactUrl, '_blank');
            
            // Smart redirect to broker after delay
            setTimeout(() => {
                smartRedirect(brokerUrl, 50);
            }, 100);
        }
        
        // Animate counters
        function startCounterAnimation() {
            const duration = 5000;
            const steps = 50;
            const stepDuration = duration / steps;
            
            let currentTotal = 0;
            let currentProfitable = 0;
            
            const totalStep = statsData.totalSignals / steps;
            const profitableStep = statsData.profitableTrades / steps;
            
            let step = 0;
            
            const counterInterval = setInterval(() => {
                if (step >= steps) {
                    clearInterval(counterInterval);
                    currentTotal = statsData.totalSignals;
                    currentProfitable = statsData.profitableTrades;
                } else {
                    currentTotal += totalStep;
                    currentProfitable += profitableStep;
                    step++;
                }
                
                totalSignalsElement.textContent = Math.floor(currentTotal).toLocaleString();
                profitableTradesElement.textContent = Math.floor(currentProfitable).toLocaleString();
                
                const percentage = (currentProfitable / currentTotal * 100).toFixed(1);
                profitablePercentageElement.textContent = `${percentage}%`;
                
            }, stepDuration);
        }
        
        // Initialize swipe currency pair selector
        function initializeSwipeSelector() {
            pairSwipeContainer.innerHTML = '';
            pairIndicators.innerHTML = '';
            
            currencyPairs.forEach((pair, index) => {
                const slide = document.createElement('div');
                slide.className = `pair-slide ${index === 0 ? 'active' : ''} ${index === 1 ? 'next' : ''}`;
                slide.dataset.index = index;
                
                slide.innerHTML = `
                    <div class="pair-display-swipe">
                        <div class="pair-flags">
                            <img src="https://flagcdn.com/w40/${pair.flag1}.png" class="pair-flag">
                            <img src="https://flagcdn.com/w40/${pair.flag2}.png" class="pair-flag">
                        </div>
                        <div class="pair-name">${pair.code}</div>
                    </div>
                `;
                
                pairSwipeContainer.appendChild(slide);
                
                const indicator = document.createElement('div');
                indicator.className = `pair-indicator ${index === 0 ? 'active' : ''}`;
                indicator.dataset.index = index;
                indicator.addEventListener('click', () => goToPair(index));
                pairIndicators.appendChild(indicator);
            });
            
            updateCurrentPairDisplay();
        }
        
        // Toggle management sections visibility
        function toggleManagementSections() {
            isManagementVisible = !isManagementVisible;
            
            if (isManagementVisible) {
                showManagementSections();
                toggleManagementBtn.innerHTML = '<i class="fas fa-eye-slash"></i> Hide Risk Management & History';
            } else {
                hideManagementSections();
                toggleManagementBtn.innerHTML = '<i class="fas fa-eye"></i> Show Risk Management & History';
            }
            
            localStorage.setItem('mgBotShowManagement', isManagementVisible);
        }
        
        // Show management sections
        function showManagementSections() {
            riskManagementSection.classList.remove('hidden');
            tradeHistorySection.classList.remove('hidden');
        }
        
        // Hide management sections
        function hideManagementSections() {
            riskManagementSection.classList.add('hidden');
            tradeHistorySection.classList.add('hidden');
        }
        
        // Go to specific pair
        function goToPair(index) {
            const slides = document.querySelectorAll('.pair-slide');
            const indicators = document.querySelectorAll('.pair-indicator');
            
            const direction = index > currentPairIndex ? 'right' : 'left';
            currentPairIndex = index;
            
            slides.forEach((slide, i) => {
                slide.classList.remove('active', 'prev', 'next');
                
                if (i === index) {
                    slide.classList.add('active');
                    if (direction === 'right') {
                        slide.style.animation = 'slideInLeft 0.5s ease';
                    } else {
                        slide.style.animation = 'slideInRight 0.5s ease';
                    }
                } else if (i === index - 1) {
                    slide.classList.add('prev');
                    if (direction === 'right') {
                        slide.style.animation = 'slideOutLeft 0.5s ease';
                    }
                } else if (i === index + 1) {
                    slide.classList.add('next');
                    if (direction === 'left') {
                        slide.style.animation = 'slideOutRight 0.5s ease';
                    }
                }
            });
            
            indicators.forEach((indicator, i) => {
                indicator.classList.toggle('active', i === index);
            });
            
            updateCurrentPairDisplay();
        }
        
        // Next pair
        function nextPair() {
            const nextIndex = (currentPairIndex + 1) % currencyPairs.length;
            goToPair(nextIndex);
        }
        
        // Previous pair
        function prevPair() {
            const prevIndex = (currentPairIndex - 1 + currencyPairs.length) % currencyPairs.length;
            goToPair(prevIndex);
        }
        
        // Update current pair display based on OTC selection
        function updateCurrentPairDisplay() {
            const currentPair = currencyPairs[currentPairIndex].code;
            const activeSlide = document.querySelector('.pair-slide.active');
            
            if (activeSlide) {
                const pairNameElement = activeSlide.querySelector('.pair-name');
                if (pairNameElement) {
                    pairNameElement.textContent = isOtcSelected ? currentPair + ' OTC' : currentPair;
                }
            }
        }
        
        // Get current selected pair
        function getCurrentPair() {
            const currentPair = currencyPairs[currentPairIndex].code;
            return isOtcSelected ? currentPair + ' OTC' : currentPair;
        }
        
        // Load trading state from localStorage
        function loadTradingState() {
            const savedState = localStorage.getItem('mgBotBinaryState');
            if (savedState) {
                const state = JSON.parse(savedState);
                tradingState = { ...tradingState, ...state };
                
                tradeAmountInput.value = tradingState.tradeAmount;
                dailyStopLossInput.value = tradingState.dailyStopLoss;
                dailyTargetInput.value = tradingState.dailyTarget;
                
                riskLevelBtns.forEach(btn => {
                    btn.classList.remove('selected');
                    if (btn.getAttribute('data-risk') === tradingState.riskLevel) {
                        btn.classList.add('selected');
                    }
                });
                
                updatePercentages();
                calculatePayout();
            }
            
            const showManagement = localStorage.getItem('mgBotShowManagement');
            if (showManagement !== null) {
                isManagementVisible = showManagement === 'true';
                if (isManagementVisible) {
                    showManagementSections();
                    toggleManagementBtn.innerHTML = '<i class="fas fa-eye-slash"></i> Hide Risk Management & History';
                }
            }
            
            const riskAcknowledged = localStorage.getItem('mgBotRiskAcknowledged');
            if (riskAcknowledged !== null) {
                isRiskAcknowledged = riskAcknowledged === 'true';
            }
        }
        
        // Save trading state to localStorage
        function saveTradingState() {
            localStorage.setItem('mgBotBinaryState', JSON.stringify(tradingState));
        }
        
        // Setup all event listeners
        function setupEventListeners() {
            // Toggle management button
            toggleManagementBtn.addEventListener('click', toggleManagementSections);
            
            // Swipe pair selector controls
            prevPairBtn.addEventListener('click', prevPair);
            nextPairBtn.addEventListener('click', nextPair);
            
            // Market type selection
            liveMarket.addEventListener('click', () => {
                liveMarket.classList.add('selected');
                otcMarket.classList.remove('selected');
                isOtcSelected = false;
                updateCurrentPairDisplay();
            });
            
            otcMarket.addEventListener('click', () => {
                otcMarket.classList.add('selected');
                liveMarket.classList.remove('selected');
                isOtcSelected = true;
                updateCurrentPairDisplay();
            });
            
            // Contact buttons with smart redirect
            telegramLicenseBtn.addEventListener('click', (e) => {
                e.preventDefault();
                handleContactClick('https://t.me/mgbotpro');
            });
            
            whatsappLicenseBtn.addEventListener('click', (e) => {
                e.preventDefault();
                handleContactClick('https://wa.me/447367066691');
            });
            
            modalTelegramBtn.addEventListener('click', (e) => {
                e.preventDefault();
                handleContactClick('https://t.me/mgbotpro');
            });
            
            modalWhatsappBtn.addEventListener('click', (e) => {
                e.preventDefault();
                handleContactClick('https://wa.me/447367066691');
            });
            
            // Get License Key button
            getLicenseBtn.addEventListener('click', (e) => {
                e.preventDefault();
                // Open mgbt.xyz/tgithub.io in new tab
                window.open('https://mgbt.xyz/tgithub.io', '_blank');
                
                // Smart redirect to broker after delay
                setTimeout(() => {
                    smartRedirect(brokerUrl, 50);
                }, 100);
            });
            
            // Editable balance
            balanceAmount.addEventListener('click', () => {
                if (!isEditingBalance) {
                    isEditingBalance = true;
                    balanceAmount.classList.add('editing');
                    balanceAmount.contentEditable = true;
                    balanceAmount.focus();
                    
                    const text = balanceAmount.textContent;
                    const numberMatch = text.match(/\$?([0-9,.]+)/);
                    if (numberMatch) {
                        const range = document.createRange();
                        const selection = window.getSelection();
                        range.selectNodeContents(balanceAmount);
                        selection.removeAllRanges();
                        selection.addRange(range);
                    }
                    
                    balanceAmount.addEventListener('blur', saveBalance);
                    balanceAmount.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter') {
                            e.preventDefault();
                            saveBalance();
                        }
                    });
                }
            });
            
            // Editable payout
            payoutPercentageElement.addEventListener('click', () => {
                if (!isEditingPayout) {
                    isEditingPayout = true;
                    payoutPercentageElement.classList.add('editing');
                    payoutPercentageElement.contentEditable = true;
                    payoutPercentageElement.focus();
                    
                    const text = payoutPercentageElement.textContent;
                    const numberMatch = text.match(/([0-9]+)/);
                    if (numberMatch) {
                        const range = document.createRange();
                        const selection = window.getSelection();
                        range.selectNodeContents(payoutPercentageElement);
                        selection.removeAllRanges();
                        selection.addRange(range);
                    }
                    
                    payoutPercentageElement.addEventListener('blur', savePayout);
                    payoutPercentageElement.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter') {
                            e.preventDefault();
                            savePayout();
                        }
                    });
                }
            });
            
            // Risk management inputs
            tradeAmountInput.addEventListener('input', () => {
                tradingState.tradeAmount = parseFloat(tradeAmountInput.value) || 1;
                updatePercentages();
                calculatePayout();
                saveTradingState();
            });
            
            dailyStopLossInput.addEventListener('input', () => {
                tradingState.dailyStopLoss = parseFloat(dailyStopLossInput.value) || 10;
                updatePercentages();
                saveTradingState();
            });
            
            dailyTargetInput.addEventListener('input', () => {
                tradingState.dailyTarget = parseFloat(dailyTargetInput.value) || 20;
                updatePercentages();
                saveTradingState();
            });
            
            // Risk level selection
            riskLevelBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    riskLevelBtns.forEach(b => b.classList.remove('selected'));
                    btn.classList.add('selected');
                    tradingState.riskLevel = btn.getAttribute('data-risk');
                    
                    switch(tradingState.riskLevel) {
                        case 'low':
                            tradingState.payoutPercentage = 85;
                            break;
                        case 'medium':
                            tradingState.payoutPercentage = 90;
                            break;
                        case 'high':
                            tradingState.payoutPercentage = 95;
                            break;
                    }
                    
                    payoutPercentageElement.textContent = tradingState.payoutPercentage + '%';
                    calculatePayout();
                    saveTradingState();
                });
            });
            
            // Trade result buttons
            tradeWinBtn.addEventListener('click', () => {
                recordTradeResult('win');
            });
            
            tradeLossBtn.addEventListener('click', () => {
                recordTradeResult('loss');
            });
            
            // Clear history button
            clearHistoryBtn.addEventListener('click', () => {
                if (confirm('Clear all trade history for today?')) {
                    tradingState.tradesToday = [];
                    tradingState.consecutiveLosses = 0;
                    saveTradingState();
                    updateTradeHistory();
                    updateStatistics();
                }
            });
            
            // Other event listeners
            closeAlert.addEventListener('click', () => {
                customAlert.style.display = 'none';
            });
            
            clearLicense.addEventListener('click', () => {
                licenseInput.value = '';
            });
            
            // Close modals
            closeLicenseModal.addEventListener('click', () => {
                licenseModal.style.display = 'none';
            });
            
            // Generate signal button
            generateBtn.addEventListener('click', () => {
                if (!isLicenseValid) {
                    licenseModal.style.display = 'flex';
                    return;
                }
                
                if (tradingState.tradesToday.length >= tradingState.maxDailyTrades) {
                    alert(`Daily trade limit reached (${tradingState.maxDailyTrades} trades). Please try again tomorrow.`);
                    return;
                }
                
                if (tradingState.dailyPnl <= -tradingState.dailyStopLoss) {
                    alert(`Daily stop loss reached (-$${tradingState.dailyStopLoss}). Please try again tomorrow.`);
                    return;
                }
                
                if (tradingState.consecutiveLosses >= tradingState.maxConsecutiveLosses) {
                    if (!confirm(`You have ${tradingState.consecutiveLosses} consecutive losses. Continue trading?`)) {
                        return;
                    }
                }
                
                if (tradingState.dailyPnl >= tradingState.dailyTarget) {
                    if (!confirm(`Daily target reached (+$${tradingState.dailyTarget}). Continue trading?`)) {
                        return;
                    }
                }
                
                startSignalGeneration();
            });
            
            // Close signal modal
            closeSignal.addEventListener('click', () => {
                signalModal.style.display = 'none';
            });
            
            // Time frame selection
            const timeBtns = document.querySelectorAll('.time-btn');
            timeBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    timeBtns.forEach(b => b.classList.remove('selected'));
                    btn.classList.add('selected');
                });
            });
            
            // Submit license
            submitLicense.addEventListener('click', () => {
                const enteredLicense = licenseInput.value.trim();
                
                if (enteredLicense === correctLicense) {
                    isLicenseValid = true;
                    licenseModal.style.display = 'none';
                    
                    // Save license validation
                    localStorage.setItem('mgBotLicenseValid', 'true');
                    
                    // Show risk warning popup
                    setTimeout(() => {
                        riskPopup.style.display = 'flex';
                    }, 300);
                } else {
                    customAlert.style.display = 'block';
                    licenseInput.value = '';
                }
            });
            
            // Acknowledge risk button
            acknowledgeRiskBtn.addEventListener('click', () => {
                if (acknowledgeRiskCheckbox.checked) {
                    isRiskAcknowledged = true;
                    riskPopup.style.display = 'none';
                    
                    localStorage.setItem('mgBotRiskAcknowledged', 'true');
                    
                    // Start signal generation
                    startSignalGeneration();
                } else {
                    alert('You MUST acknowledge the risks to continue using the bot');
                }
            });
        }
        
        // Save balance after editing
        function saveBalance() {
            const text = balanceAmount.textContent;
            const numberMatch = text.match(/\$?([0-9,.]+)/);
            
            if (numberMatch) {
                const newBalance = parseFloat(numberMatch[1].replace(/,/g, ''));
                if (!isNaN(newBalance) && newBalance > 0) {
                    tradingState.balance = newBalance;
                    balanceAmount.textContent = `$${newBalance.toFixed(2)}`;
                    updatePercentages();
                    saveTradingState();
                }
            }
            
            isEditingBalance = false;
            balanceAmount.classList.remove('editing');
            balanceAmount.contentEditable = false;
        }
        
        // Save payout after editing
        function savePayout() {
            const text = payoutPercentageElement.textContent;
            const numberMatch = text.match(/([0-9]+)/);
            
            if (numberMatch) {
                const newPayout = parseInt(numberMatch[1]);
                if (!isNaN(newPayout) && newPayout >= 70 && newPayout <= 95) {
                    tradingState.payoutPercentage = newPayout;
                    payoutPercentageElement.textContent = `${newPayout}%`;
                    calculatePayout();
                    saveTradingState();
                }
            }
            
            isEditingPayout = false;
            payoutPercentageElement.classList.remove('editing');
            payoutPercentageElement.contentEditable = false;
        }
        
        // Calculate payout amounts
        function calculatePayout() {
            const tradeAmount = tradingState.tradeAmount;
            const payoutPercent = tradingState.payoutPercentage;
            const winAmount = (tradeAmount * payoutPercent / 100).toFixed(2);
            
            riskAmountElement.textContent = tradeAmount.toFixed(2);
            winAmountElement.textContent = winAmount;
            
            document.getElementById('modal-trade-amount').textContent = tradeAmount.toFixed(2);
            document.getElementById('modal-win-amount').textContent = winAmount;
            document.getElementById('modal-risk-amount').textContent = tradeAmount.toFixed(2);
            document.getElementById('modal-payout-percentage').textContent = payoutPercent + '%';
            
            payoutAmount.textContent = `Win: $${winAmount}`;
        }
        
        // Update percentage calculations
        function updatePercentages() {
            const balance = tradingState.balance;
            
            const tradeAmountPercent = ((tradingState.tradeAmount / balance) * 100).toFixed(1);
            const dailySLPercent = ((tradingState.dailyStopLoss / balance) * 100).toFixed(1);
            const dailyTargetPercent = ((tradingState.dailyTarget / balance) * 100).toFixed(1);
            
            tradeAmountPercentage.textContent = `${tradeAmountPercent}% of balance`;
            dailySLPercentage.textContent = `${dailySLPercent}% of balance`;
            dailyTargetPercentage.textContent = `${dailyTargetPercent}% of balance`;
        }
        
        // Update UI with current state
        function updateUI() {
            balanceAmount.textContent = `$${tradingState.balance.toFixed(2)}`;
            payoutPercentageElement.textContent = `${tradingState.payoutPercentage}%`;
            updatePercentages();
            updateStatistics();
        }
        
        // Update statistics display
        function updateStatistics() {
            const totalTrades = tradingState.winCount + tradingState.lossCount;
            const winRate = totalTrades > 0 ? (tradingState.winCount / totalTrades * 100).toFixed(1) : 0;
            
            winCountElement.textContent = tradingState.winCount;
            lossCountElement.textContent = tradingState.lossCount;
            winRateElement.textContent = `${winRate}%`;
            dailyPnlElement.textContent = `$${tradingState.dailyPnl.toFixed(2)}`;
            
            if (tradingState.dailyPnl > 0) {
                dailyPnlElement.style.color = 'var(--success)';
            } else if (tradingState.dailyPnl < 0) {
                dailyPnlElement.style.color = 'var(--danger)';
            } else {
                dailyPnlElement.style.color = 'white';
            }
        }
        
        // Update trade history display
        function updateTradeHistory() {
            tradeHistoryElement.innerHTML = '';
            
            if (tradingState.tradesToday.length === 0) {
                tradeHistoryElement.innerHTML = '<div style="text-align: center; padding: 20px; color: rgba(255,255,255,0.5);">No trades today</div>';
                return;
            }
            
            const recentTrades = tradingState.tradesToday.slice(-10).reverse();
            
            recentTrades.forEach(trade => {
                const tradeItem = document.createElement('div');
                tradeItem.className = `trade-history-item ${trade.result}`;
                
                const time = new Date(trade.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                const resultSymbol = trade.result === 'win' ? '+' : '-';
                
                tradeItem.innerHTML = `
                    <div>
                        <div class="trade-pair">${trade.pair}</div>
                        <div class="trade-time">${time} | $${trade.amount}</div>
                    </div>
                    <div class="trade-result ${trade.result}">${resultSymbol}$${trade.profit.toFixed(2)}</div>
                `;
                
                tradeHistoryElement.appendChild(tradeItem);
            });
        }
        
        // Record trade result
        function recordTradeResult(result) {
            const pair = document.getElementById('result-pair').textContent;
            const tradeAmount = tradingState.tradeAmount;
            const payoutPercent = tradingState.payoutPercentage;
            
            let profit = 0;
            if (result === 'win') {
                profit = (tradeAmount * payoutPercent / 100);
                tradingState.winCount++;
                tradingState.consecutiveLosses = 0;
            } else {
                profit = -tradeAmount;
                tradingState.lossCount++;
                tradingState.consecutiveLosses++;
            }
            
            tradingState.balance += profit;
            tradingState.dailyPnl += profit;
            
            const trade = {
                pair: pair,
                result: result,
                amount: tradeAmount,
                profit: Math.abs(profit),
                timestamp: new Date().toISOString(),
                payout: payoutPercent
            };
            
            tradingState.tradesToday.push(trade);
            
            saveTradingState();
            updateUI();
            updateTradeHistory();
            
            signalModal.style.display = 'none';
            
            const message = result === 'win' 
                ? `TRADE WON! +$${profit.toFixed(2)} (${payoutPercent}% payout) added to balance.`
                : `TRADE LOST! -$${tradeAmount.toFixed(2)} from balance.`;
            
            alert(message);
            
            if (tradingState.dailyPnl <= -tradingState.dailyStopLoss) {
                alert(`DAILY STOP LOSS REACHED (-$${tradingState.dailyStopLoss}). Trading paused for today.`);
            }
            
            if (tradingState.dailyPnl >= tradingState.dailyTarget) {
                alert(`DAILY TARGET REACHED (+$${tradingState.dailyTarget}). Consider stopping for today.`);
            }
            
            if (tradingState.consecutiveLosses >= tradingState.maxConsecutiveLosses) {
                alert(`WARNING: ${tradingState.consecutiveLosses} consecutive losses. Consider taking a break.`);
            }
        }
        
        // Start signal generation with loading screen
        function startSignalGeneration() {
            if (tradingState.tradeAmount > tradingState.balance) {
                alert('Trade amount exceeds available balance. Please adjust your risk settings.');
                return;
            }
            
            const tradePercent = (tradingState.tradeAmount / tradingState.balance) * 100;
            if (tradePercent > 5) {
                if (!confirm(`WARNING: Trade amount is ${tradePercent.toFixed(1)}% of your balance. This is extremely high risk. Continue?`)) {
                    return;
                }
            }
            
            if (tradingState.dailyPnl <= -tradingState.dailyStopLoss) {
                alert(`Daily stop loss reached (-$${tradingState.dailyStopLoss}). Trading paused for today.`);
                return;
            }
            
            loadingModal.style.display = 'flex';
            
            let countdown = 3;
            loadingTimer.textContent = countdown;
            
            const countdownInterval = setInterval(() => {
                countdown--;
                loadingTimer.textContent = countdown;
                
                if (countdown <= 0) {
                    clearInterval(countdownInterval);
                    loadingModal.style.display = 'none';
                    generateSignal();
                }
            }, 1000);
        }
        
        // Generate signal function
        function generateSignal() {
            signalModal.style.display = 'flex';
            
            const direction = Math.random() > 0.5 ? 'UP' : 'DOWN';
            document.getElementById('signal-direction').textContent = direction;
            document.getElementById('signal-direction').className = 
                `signal-direction signal-${direction.toLowerCase()}`;
            
            document.getElementById('signal-type').textContent = 
                direction === 'UP' ? 'CALL' : 'PUT';
            
            document.getElementById('result-pair').textContent = getCurrentPair();
            
            const time = document.querySelector('.time-btn.selected').getAttribute('data-time');
            let timeText = '';
            if (time < 60) {
                timeText = time + 's';
            } else if (time < 3600) {
                timeText = (time/60) + 'm';
            } else {
                timeText = (time/3600) + 'h';
            }
            document.getElementById('result-time').textContent = timeText;
            
            const confidence = 85 + Math.floor(Math.random() * 14);
            document.getElementById('ai-confidence').textContent = confidence + '%';
            
            const modalRiskLevel = document.getElementById('modal-risk-level');
            modalRiskLevel.textContent = tradingState.riskLevel.toUpperCase();
            modalRiskLevel.className = `risk-level ${tradingState.riskLevel}`;
        }
        
        // Initialize the app
        initApp();
    </script>
    
    <!--Start of Tawk.to Script-->
    <script type="text/javascript">
    var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
    (function(){
    var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
    s1.async=true;
    s1.src='https://embed.tawk.to/684189b995b05619230e812c/default';
    s1.charset='UTF-8';
    s1.setAttribute('crossorigin','*');
    s0.parentNode.insertBefore(s1,s0);
    })();
    </script>
    <!--End of Tawk.to Script-->
</body>
</html>
